(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"./MapStore2/web/client/components/import/ImportDragZone.jsx":function(e,t,n){var r=["onClose","onDrop","onRef"];function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a=n("./node_modules/react/index.js"),s=n("./MapStore2/web/client/components/import/dragZone/DragZone.jsx"),i=n("./MapStore2/web/client/components/import/dragZone/Content.jsx"),l=n("./MapStore2/web/client/components/import/dragZone/enhancers/processFiles.jsx"),c=n("./MapStore2/web/client/components/import/dragZone/enhancers/useFiles.js"),p=n("./MapStore2/web/client/components/import/dragZone/enhancers/dropZoneHandlers.js"),u=n("./node_modules/recompose/es/Recompose.js").compose;e.exports=u(l,c,p)((function(e){var t=e.onClose,n=void 0===t?function(){}:t,l=e.onDrop,c=void 0===l?function(){}:l,p=e.onRef,u=void 0===p?function(){}:p,f=o(e,r);return a.createElement(s,{onClose:n,onDrop:c,onRef:u},a.createElement(i,f))}))},"./MapStore2/web/client/components/import/SelectShape.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),d=n("./node_modules/react-dropzone/dist/index.js"),y=n("./node_modules/react-spinkit/dist/index.js"),b=n("./MapStore2/web/client/utils/LocaleUtils.js"),h=n("./node_modules/jszip/lib/index.js"),g=n("./MapStore2/web/client/utils/FileUtils.js"),S=n("./node_modules/es6-promise/dist/es6-promise.js").Promise,j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(p,e);var t,n,r,l=i(p);function p(){var e;o(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return u(c(e=l.call.apply(l,[this].concat(n))),"tryUnzip",(function(e){return g.readZip(e).then((function(e){return(new h).loadAsync(e)}))})),u(c(e),"checkFileType",(function(t){return new S((function(n,r){var o=g.recognizeExt(t.name),a=t.type||g.MIME_LOOKUPS[o];"application/x-zip-compressed"===a||"application/zip"===a||"application/vnd.google-earth.kml+xml"===a||"application/vnd.google-earth.kmz"===a||"application/gpx+xml"===a?n():e.tryUnzip(t).then(n).catch(r)}))})),u(c(e),"checkfile",(function(t){S.all(t.map((function(t){return e.checkFileType(t)}))).then((function(){e.props.error&&e.props.onShapeError(null),e.props.onShapeChoosen(t)})).catch((function(){var t=b.getMessageById(e.context.messages,e.props.errorMessage);e.props.onShapeError(t)}))})),e}return t=p,(n=[{key:"render",value:function(){return this.props.loading?m.createElement("div",{className:"btn btn-info",style:{float:"center"}}," ",m.createElement(y,{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"})):m.createElement(d,{rejectClassName:"alert-danger",className:"alert alert-info",onDrop:this.checkfile},m.createElement("div",{className:"dropzone-content",style:{textAlign:"center"}},this.props.text))}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(m.Component);u(j,"propTypes",{text:f.oneOfType([f.string,f.element]),loading:f.bool,onShapeChoosen:f.func,onShapeError:f.func,error:f.oneOfType([f.string,f.element]),errorMessage:f.string}),u(j,"contextTypes",{messages:f.object}),u(j,"defaultProps",{text:"Drop or click to import a local Shape",onShapeChoosen:function(){},onShapeError:function(){},errorMessage:"shapefile.error.select"}),e.exports=j},"./MapStore2/web/client/components/import/ShapefileUploadAndStyle.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=n("./node_modules/react/index.js"),d=n("./node_modules/prop-types/index.js"),y=n("./MapStore2/web/client/components/I18N/Message.jsx"),b=n("./MapStore2/web/client/utils/LayersUtils.js"),h=n("./MapStore2/web/client/utils/LocaleUtils.js"),g=n("./MapStore2/web/client/utils/FileUtils.js"),S=n("./node_modules/react-bootstrap/es/index.js"),j=S.Grid,v=S.Row,x=S.Col,E=S.Button,O=n("./node_modules/lodash/lodash.js").isString,w=n("./node_modules/react-widgets/lib/index.js").DropdownList,P=n("./MapStore2/web/client/components/import/SelectShape.jsx"),M=n("./node_modules/es6-promise/dist/es6-promise.js").Promise,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,n,r,c=l(u);function u(){var e;a(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(p(e=c.call.apply(c,[this].concat(n))),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0}),f(p(e),"getGeometryType",(function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce((function(e,t){return t&&t.type===e?e:t.type}),null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null})),f(p(e),"getGeomType",(function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce((function(t,n){var r=e.getGeometryType(n.geometry);return t?r===t?t:"GeometryCollection":r}),null):null})),f(p(e),"renderError",(function(){return m.createElement(v,null,m.createElement("div",{style:{textAlign:"center"},className:"alert alert-danger"},m.createElement(y,{msgId:e.props.error})))})),f(p(e),"renderSuccess",(function(){return m.createElement(v,null,m.createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))})),f(p(e),"renderStyle",(function(){return e.props.stylers[e.getGeomType(e.props.selected)]})),f(p(e),"renderDefaultStyle",(function(){return e.props.selected?m.createElement(v,null,m.createElement(x,{xs:2},m.createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),m.createElement(x,{style:{paddingLeft:0,paddingTop:1},xs:10},m.createElement("label",null,m.createElement(y,{msgId:"shapefile.defaultStyle"}))),m.createElement(x,{xs:2},m.createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),m.createElement(x,{style:{paddingLeft:0,paddingTop:1},xs:10},m.createElement("label",null,m.createElement(y,{msgId:"shapefile.zoom"})))):null})),f(p(e),"addShape",(function(t){e.props.shapeLoading(!0);var n=e.props.readFiles(t,e.props.onShapeError);M.all(n).then((function(t){var n=t.filter((function(e){return e[0]&&e[0].features&&0!==e[0].features.length||"Feature"===e[0].type}));n=n.reduce((function(t,n){return n?t.concat(n.map((function(t){return b.geoJSONToLayer(t,e.props.createId(t,n))}))):t}),[]),e.props.onShapeChoosen(n),e.props.shapeLoading(!1)})).catch((function(t){e.props.shapeLoading(!1);var n=t&&t.name||t||"";O(n)&&"SyntaxError"===n?e.props.onShapeError("shapefile.error.shapeFileParsingError"):e.props.onShapeError("shapefile.error.genericLoadError")}))})),f(p(e),"addToMap",(function(){e.props.shapeLoading(!0);var t=e.props.selected;M.resolve(e.props.addShapeLayer(t)).then((function(){e.props.shapeLoading(!1);var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateShapeBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326")),e.props.onShapeSuccess(e.props.layers[0].name+h.getMessageById(e.context.messages,"shapefile.success")),e.props.onLayerAdded(e.props.selected)})).catch((function(){e.props.shapeLoading(!1),e.props.onShapeError("shapefile.error.genericLoadError")}))})),e}return t=u,(n=[{key:"render",value:function(){var e=this;return m.createElement(j,{role:"body",style:{width:"300px"},fluid:!0},this.props.error?this.renderError():null,this.props.success?this.renderSuccess():null,m.createElement(v,{style:{textAlign:"center"}},this.props.selected?m.createElement(w,{data:this.props.layers,value:this.props.selected,onSelect:function(t){return e.props.onSelectLayer(t)},valueField:"id",textField:"name"}):m.createElement(P,o({},this.props.uploadOptions,{errorMessage:"shapefile.error.select",text:this.props.uploadMessage,onShapeChoosen:this.addShape,onShapeError:this.props.onShapeError}))),m.createElement(v,{style:{marginBottom:10}},this.state.useDefaultStyle?null:this.renderStyle()),this.renderDefaultStyle(),this.props.selected?m.createElement(v,null,m.createElement(x,{xsOffset:6,xs:3}," ",m.createElement(E,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.onShapeChoosen(null)}},this.props.cancelMessage)),m.createElement(x,{xs:3}," ",m.createElement(E,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},this.props.addMessage))):null)}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(m.Component);f(_,"propTypes",{bbox:d.array,layers:d.array,selected:d.object,style:d.object,shapeStyle:d.object,readFiles:d.func,onShapeError:d.func,onShapeSuccess:d.func,onShapeChoosen:d.func,addShapeLayer:d.func,shapeLoading:d.func,onSelectLayer:d.func,onLayerAdded:d.func,onZoomSelected:d.func,updateShapeBBox:d.func,error:d.string,success:d.string,mapType:d.string,buttonSize:d.string,uploadMessage:d.object,cancelMessage:d.object,addMessage:d.object,stylers:d.object,uploadOptions:d.object,createId:d.func}),f(_,"contextTypes",{messages:d.object}),f(_,"defaultProps",{shapeLoading:function(){},readFiles:function(e,t){return e.map((function(e){var n=g.recognizeExt(e.name),r=e.type||g.MIME_LOOKUPS[n];return"application/vnd.google-earth.kml+xml"===r?g.readKml(e).then((function(e){return g.kmlToGeoJSON(e)})):"application/gpx+xml"===r?g.readKml(e).then((function(e){return g.gpxToGeoJSON(e)})):"application/vnd.google-earth.kmz"===r?g.readKmz(e).then((function(e){return g.kmlToGeoJSON(e)})):"application/x-zip-compressed"===r||"application/zip"===r?g.readZip(e).then((function(e){return g.checkShapePrj(e).then((function(n){return n.length>0&&t("shapefile.error.missingPrj"),g.shpToGeoJSON(e)}))})):null}))},mapType:"leaflet",stylers:{},buttonSize:"small",uploadOptions:{},createId:function(){},bbox:null}),e.exports=_},"./MapStore2/web/client/components/import/dragZone/Content.jsx":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,a=r.branch,s=r.renderComponent,i=n("./MapStore2/web/client/components/import/dragZone/LoadingContent.jsx"),l=n("./MapStore2/web/client/components/import/dragZone/ErrorContent.jsx"),c=n("./MapStore2/web/client/components/import/dragZone/NormalContent.jsx");e.exports=o(a((function(e){return e.loading}),s(i)),a((function(e){return e.error}),s(l)))(c)},"./MapStore2/web/client/components/import/dragZone/DragZone.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-dropzone/dist/index.js"),a=n("./node_modules/react-bootstrap/es/index.js"),s=a.Button,i=a.Glyphicon,l=n("./MapStore2/web/client/components/misc/enhancers/tooltip.jsx")(s);e.exports=function(e){var t=e.accept,n=e.children,a=e.onRef,s=void 0===a?function(){}:a,c=e.onClose,p=void 0===c?function(){}:c,u=e.onDrop,f=void 0===u?function(){}:u,m=e.onDragEnter,d=void 0===m?function(){}:m,y=e.onDragLeave,b=void 0===y?function(){}:y;return r.createElement(o,{disableClick:!0,ref:s,id:"DRAGDROP_IMPORT_ZONE",style:{position:"relative",height:"100%"},accept:t,onDrop:f,onDragEnter:d,onDragLeave:b},r.createElement("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,background:"rgba(0,0,0,0.75)",color:"#fff",zIndex:2e3,display:"flex",textAlign:"center"}},r.createElement(l,{style:{border:"none",background:"transparent",color:"white",fontSize:35,top:0,right:0,position:"absolute"},onClick:function(){return p()}},r.createElement(i,{glyph:"1-close"})),r.createElement("div",{style:{margin:"auto",maxWidth:550}},n)))}},"./MapStore2/web/client/components/import/dragZone/DropText.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js").Button,a=n("./MapStore2/web/client/components/I18N/Message.jsx"),s=n("./MapStore2/web/client/components/I18N/HTML.jsx");e.exports=function(e){var t=e.openFileDialog;return r.createElement("div",null,r.createElement(s,{msgId:"mapImport.dropZone.heading"}),t?r.createElement(o,{bsStyle:"primary",onClick:t},r.createElement(a,{msgId:"mapImport.dropZone.selectFiles"})):null,r.createElement("br",null),r.createElement("br",null),r.createElement(s,{msgId:"mapImport.dropZone.infoSupported"}),r.createElement("hr",null),r.createElement(s,{msgId:"mapImport.dropZone.note"}))}},"./MapStore2/web/client/components/import/dragZone/ErrorContent.jsx":function(e,t,n){var r=["error"];function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a=n("./node_modules/react/index.js"),s=n("./node_modules/react-bootstrap/es/index.js"),i=s.Glyphicon,l=s.Alert,c=n("./MapStore2/web/client/components/import/dragZone/DropText.jsx"),p=n("./MapStore2/web/client/components/I18N/Message.jsx"),u={FILE_NOT_SUPPORTED:a.createElement(p,{msgId:"mapImport.errors.fileNotSupported"}),PROJECTION_NOT_SUPPORTED:a.createElement(p,{msgId:"mapImport.errors.projectionNotSupported"})};e.exports=function(e){var t=e.error,n=o(e,r);return a.createElement("div",{style:{margin:"auto",maxWidth:550}},a.createElement("div",null,a.createElement(i,{glyph:"exclamation-mark",style:{fontSize:80}})),a.createElement("h5",null,function(e){return e?u[e.message]||u[e]||a.createElement("span",null,a.createElement(p,{msgId:"mapImport.errors.unknownError"}),":",a.createElement(l,{bsStyle:"warning"},e.message)):a.createElement(p,{msgId:"mapImport.errors.unknownError"})}(t)),a.createElement(c,n))}},"./MapStore2/web/client/components/import/dragZone/LoadingContent.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./MapStore2/web/client/components/misc/Loader.jsx"),a=n("./MapStore2/web/client/components/I18N/Message.jsx");e.exports=function(){return r.createElement("div",{style:{margin:"auto",maxWidth:550}},r.createElement(o,{size:80,color:"#ffffff",style:{margin:"auto"}}),r.createElement("h4",null,r.createElement(a,{msgId:"loading"})))}},"./MapStore2/web/client/components/import/dragZone/NormalContent.jsx":function(e,t,n){var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-bootstrap/es/index.js").Glyphicon,a=n("./MapStore2/web/client/components/import/dragZone/DropText.jsx");e.exports=function(e){return r.createElement("div",null,r.createElement("div",null,r.createElement(o,{glyph:"upload",style:{fontSize:80}})),r.createElement(a,e))}},"./MapStore2/web/client/components/import/dragZone/enhancers/dropZoneHandlers.js":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,a=r.withHandlers;e.exports=o(a((function(){var e=null;return{onRef:function(){return function(t){return e=t}},openFileDialog:function(){return function(){return e.open()}}}})))},"./MapStore2/web/client/components/import/dragZone/enhancers/processFiles.jsx":function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n("./node_modules/rxjs/Rx.js"),c=n("./node_modules/recompose/es/Recompose.js"),p=c.compose,u=c.mapPropsStream,f=c.createEventHandler,m=n("./node_modules/lodash/lodash.js"),d=m.get,y=m.some,b=m.every,h=n("./MapStore2/web/client/utils/FileUtils.js"),g=n("./MapStore2/web/client/utils/LayersUtils.js"),S=n("./MapStore2/web/client/utils/ConfigUtils.js"),j=n("./MapStore2/web/client/utils/AnnotationsUtils.js").isAnnotation,v=n("./node_modules/jszip/lib/index.js"),x=function(e){return new Promise((function(t,n){var r=h.recognizeExt(e.name),o=e.type||h.MIME_LOOKUPS[r];"application/x-zip-compressed"===o||"application/zip"===o||"application/vnd.google-earth.kml+xml"===o||"application/vnd.google-earth.kmz"===o||"application/gpx+xml"===o||"application/json"===o||"application/vnd.wmc"===o?t(e):function(e){return h.readZip(e).then((function(e){return(new v).loadAsync(e)}))}(e).then((function(){return t(e)})).catch((function(){return n(new Error("FILE_NOT_SUPPORTED"))}))}))};e.exports=p(u((function(e){var t=f(),n=t.handler,o=t.stream,a=f(),i=a.handler,c=a.stream;return e.combineLatest(o.switchMap((function(e){return l.Observable.from(e).flatMap(x).flatMap(function(e){return function(t){var n=h.recognizeExt(t.name),r=t.type||h.MIME_LOOKUPS[n],o=S.getConfigProp("projectionDefs")||[],a=(o.length&&o.map((function(e){return e.code}))||[]).concat(["EPSG:4326","EPSG:3857","EPSG:900913"]);return"application/vnd.google-earth.kml+xml"===r?h.readKml(t).then((function(e){return h.kmlToGeoJSON(e)})):"application/gpx+xml"===r?h.readKml(t).then((function(e){return h.gpxToGeoJSON(e,t.name)})):"application/vnd.google-earth.kmz"===r?h.readKmz(t).then((function(e){return h.kmlToGeoJSON(e)})):"application/x-zip-compressed"===r||"application/zip"===r?h.readZip(t).then((function(n){return h.checkShapePrj(n).then((function(r){r.length>0&&e({type:"warning",filename:t.name,message:"shapefile.error.missingPrj"});var o=h.shpToGeoJSON(n).map((function(e){return s(s({},e),{},{filename:t.name})}));if(y(o,(function(e){return!!d(e,"map.projection")}))){var i=o.filter((function(e){return!!d(e,"map.projection")}));if(b(i,(function(e){return a.includes(e.map.projection)})))return o;throw new Error("PROJECTION_NOT_SUPPORTED")}return o}))})):"application/json"===r?h.readJson(t).then((function(e){var n=d(e,"map.projection");if(n){if(a.includes(n))return[s(s({},e),{},{fileName:t.name})];throw new Error("PROJECTION_NOT_SUPPORTED")}return[s(s({},e),{},{fileName:t.name})]})):"application/vnd.wmc"===r?h.readWMC(t).then((function(e){return[e]})):null}}(i)).reduce((function(e,t){return{layers:(e.layers||[]).concat(t.filter((function(e){return function(e){return e&&e.features&&0!==e.features.length}(e)})).map((function(e){return j(e)?{name:"Annotations",features:(null==e?void 0:e.features)||[],filename:e.filename}:s(s({},g.geoJSONToLayer(e)),{},{filename:e.filename})}))),maps:(e.maps||[]).concat(t.filter((function(e){return function(e){return e&&e.version&&e.map}(e)})))}}),{}).map((function(e){return{loading:!1,files:e}})).catch((function(e){return l.Observable.of({error:e,loading:!1})})).startWith({loading:!0})})).startWith({}),(function(e,t){return s(s(s({},e),t),{},{onDrop:n})})).combineLatest(c.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(r(e),[t])}),[]).startWith(void 0),(function(e,t){return s(s({},e),{},{warnings:t})}))})))},"./MapStore2/web/client/components/import/dragZone/enhancers/useFiles.js":function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n("./node_modules/recompose/es/Recompose.js"),i=s.compose,l=s.mapPropsStream,c=s.withHandlers;e.exports=i(c({useFiles:function(e){var t=e.currentMap,n=e.loadMap,r=void 0===n?function(){}:n,a=e.onClose,s=void 0===a?function(){}:a,i=e.setLayers,l=void 0===i?function(){}:i,c=e.annotationsLayer,p=e.loadAnnotations,u=void 0===p?function(){}:p;return function(e,n){var a=e.layers,i=void 0===a?[]:a,p=e.maps,f=(void 0===p?[]:p)[0];if(f){var m=t.zoom,d=t.center;r(o(o({},f),{},{map:o(o({},f.map),{},{zoom:f.map.zoom||m,center:f.map.center||d})}),null,!f.map.zoom&&(f.map.bbox||{bounds:f.map.maxExtent})),s()}if(i.length>0){var y=i&&"Annotations"===i[0].name;!c&&y?(u(i[0].features,!1),s()):l(i,n)}}}}),l((function(e){return e.merge(e.distinctUntilKeyChanged("files").filter((function(e){return e.files})).do((function(e){var t=e.files,n=e.useFiles,r=void 0===n?function(){}:n,o=e.warnings;return r(t,void 0===o?[]:o)})).ignoreElements())})))},"./MapStore2/web/client/components/import/style/StylePanel.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n("./node_modules/prop-types/index.js"),y=n("./node_modules/react/index.js"),b=n("./MapStore2/web/client/components/I18N/Message.jsx"),h=n("./MapStore2/web/client/utils/LocaleUtils.js"),g=n("./MapStore2/web/client/utils/AnnotationsUtils.js").isAnnotation,S=n("./MapStore2/web/client/utils/StyleUtils.js").toVectorStyle,j=n("./node_modules/react-bootstrap/es/index.js"),v=j.Grid,x=j.Row,E=j.Col,O=j.Button,w=j.Alert,P=j.ButtonToolbar,M=n("./node_modules/es6-promise/dist/es6-promise.js").Promise,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(p,e);var t,n,r,a=c(p);function p(){var e;s(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(u(e=a.call.apply(a,[this].concat(n))),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0,overrideAnnotation:!1,initialLayers:[]}),m(u(e),"getGeometryType",(function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce((function(e,t){return t&&t.type===e?e:t.type}),null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null})),m(u(e),"getGeomType",(function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce((function(t,n){var r=e.getGeometryType(n.geometry);return t?r===t?t:"GeometryCollection":r}),null):null})),m(u(e),"renderError",(function(){return e.props.errors&&e.props.errors.filter((function(t){return(t.filename||t.name)&&e.props.layers&&e.props.layers[0]&&(e.props.layers[0].filename===t.filename||e.props.layers[0].name===t.name)})).map((function(e){return y.createElement(x,{key:e&&e.name+e.message},y.createElement(w,{bsStyle:e.type,style:{textAlign:"center"}},y.createElement(b,{msgId:e.message})))}))})),m(u(e),"renderSuccess",(function(){return y.createElement(x,null,y.createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))})),m(u(e),"findLayerSerialNumber",(function(t){var n=t.name;return e.state.initialLayers.findIndex((function(e){return e.name===n}))+1})),m(u(e),"addToMap",(function(){var t=e.props.selected;e.state.useDefaultStyle||(t=S(t,e.props.shapeStyle));var n=g(t);M.resolve(n?e.props.loadAnnotations(t.features,e.state.overrideAnnotation):e.props.addLayer(t)).then((function(){if(!n){var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326"))}e.props.onSuccess(e.props.layers.length>1?n?"Annotation":e.props.layers[0].name+h.getMessageById(e.context.messages,"shapefile.success"):void 0),e.props.onLayerAdded(e.props.selected)})).catch((function(t){e.props.onError({type:"error",name:n?"Annotation":e.props.layers[0].name,error:t,message:"shapefile.error.genericLoadError"})}))})),m(u(e),"annotationOptions",(function(){return y.createElement(y.Fragment,null,y.createElement(E,{xs:2},y.createElement("input",{type:"radio",checked:!e.state.overrideAnnotation,onChange:function(){e.setState({overrideAnnotation:!1})}})),y.createElement(E,{style:{paddingLeft:0,paddingTop:1},xs:10},y.createElement("label",null,y.createElement(b,{msgId:"shapefile.merge"}))),y.createElement(E,{xs:2},y.createElement("input",{type:"radio",checked:e.state.overrideAnnotation,onChange:function(){e.setState({overrideAnnotation:!0})}})),y.createElement(E,{style:{paddingLeft:0,paddingTop:1},xs:10},y.createElement("label",null,y.createElement(b,{msgId:"shapefile.replace"}))))})),e}return t=p,(n=[{key:"componentDidMount",value:function(){this.setState({initialLayers:o(this.props.layers)})}},{key:"render",value:function(){var e=this;return y.createElement(v,{role:"body",style:{width:"400px"},fluid:!0},this.props.errors?this.renderError():null,this.props.success?this.renderSuccess():null,y.createElement(x,null,y.createElement("h4",null,y.createElement("span",{style:{fontWeight:"bold"}},y.createElement(b,{msgId:"shapefile.layerOf",msgParams:{count:this.findLayerSerialNumber(this.props.selected),total:this.state.initialLayers.length}}))," ",this.props.selected.name)),y.createElement(x,{key:"styler",style:{marginBottom:10}},this.state.useDefaultStyle?null:this.props.stylers[this.getGeomType(this.props.selected)]),y.createElement(x,{key:"options"},g(this.props.selected)?this.annotationOptions():y.createElement(y.Fragment,null,y.createElement(E,{xs:2},y.createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),y.createElement(E,{style:{paddingLeft:0,paddingTop:1},xs:10},y.createElement("label",null,y.createElement(b,{msgId:"shapefile.defaultStyle"}))),y.createElement(E,{xs:2},y.createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),y.createElement(E,{style:{paddingLeft:0,paddingTop:1},xs:10},y.createElement("label",null,y.createElement(b,{msgId:"shapefile.zoom"}))))),y.createElement(x,null,y.createElement(P,{style:{display:"flex",justifyContent:"flex-end"}},y.createElement(O,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.setLayers(null)}},this.props.cancelMessage),y.createElement(O,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){return e.props.onLayerSkipped(e.props.selected)}},this.props.skipMessage),y.createElement(O,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},1===this.props.layers.length?this.props.finishMessage:this.props.nextMessage))))}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(y.Component);m(_,"propTypes",{bbox:d.array,layers:d.array,selected:d.object,style:d.object,shapeStyle:d.object,onError:d.func,onSuccess:d.func,setLayers:d.func,addLayer:d.func,loadAnnotations:d.func,onSelectLayer:d.func,onLayerAdded:d.func,onLayerSkipped:d.func,onZoomSelected:d.func,updateBBox:d.func,errors:d.array,success:d.string,mapType:d.string,buttonSize:d.string,cancelMessage:d.object,addMessage:d.object,stylers:d.object,nextMessage:d.object,finishMessage:d.object,skipMessage:d.object}),m(_,"contextTypes",{messages:d.object}),m(_,"defaultProps",{mapType:"leaflet",buttonSize:"small",setLayers:function(){},addLayer:function(){},loadAnnotations:function(){},updateBBox:function(){},onZoomSelected:function(){},stylers:{},bbox:null}),e.exports=_},"./MapStore2/web/client/components/misc/StandardDialog.jsx":function(e,t,n){var r=["show","style","modal","draggable","closeGlyph","closable","onClose","title","header","footer","children"];function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=n("./node_modules/react/index.js"),p=n("./MapStore2/web/client/components/misc/Dialog.jsx"),u=n("./node_modules/react-bootstrap/es/index.js").Glyphicon;e.exports=function(e){var t=e.show,n=e.style,a=void 0===n?{}:n,i=e.modal,f=e.draggable,m=void 0!==f&&f,d=e.closeGlyph,y=void 0===d?"1-close":d,b=e.closable,h=void 0===b||b,g=e.onClose,S=void 0===g?function(){}:g,j=e.title,v=e.header,x=e.footer,E=e.children,O=l(e,r);return t?c.createElement(p,o({modal:i,onClickOut:h&&i?function(){return S()}:null,style:s(s({},a),{},{display:t?"block":"none"}),draggable:m},O),c.createElement("span",{role:"header"},j||(v||c.createElement("span",null," ")),h?c.createElement("button",{onClick:function(){return S()},className:"settings-panel-close close"},c.createElement(u,{glyph:y})):null),c.createElement("span",{role:"body"},E),x?c.createElement("span",{role:"footer"},x):null):null}},"./MapStore2/web/client/plugins/import/Import.jsx":function(e,t,n){var r=n("./node_modules/recompose/es/Recompose.js"),o=r.compose,a=r.branch,s=r.mapPropsStream,i=r.renderComponent,l=r.renderNothing,c=n("./node_modules/reselect/es/index.js").createStructuredSelector,p=n("./MapStore2/web/client/components/import/ImportDragZone.jsx"),u=n("./node_modules/react-redux/es/index.js").connect,f=n("./MapStore2/web/client/plugins/import/StyleDialog.jsx"),m=n("./MapStore2/web/client/actions/config.js").configureMap,d=n("./MapStore2/web/client/selectors/map.js").mapSelector;e.exports=o(s((function(e){return e.merge(e.filter((function(e){var t=e.layers;return t&&t.length>0})).exhaustMap((function(){return e.filter((function(e){var t=e.layers;return!t||0===t.length})).take(1).do((function(e){var t=e.onClose,n=void 0===t?function(){}:t;return n&&n()})).ignoreElements()})))})),a((function(e){return!e.enabled}),l),a((function(e){var t=e.layers;return!t||0===t.length}),o(u(c({currentMap:d}),{loadMap:m}),i(p))))(f)},"./MapStore2/web/client/plugins/import/StyleDialog.jsx":function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n("./node_modules/prop-types/index.js"),m=n("./node_modules/react/index.js"),d=n("./MapStore2/web/client/plugins/locale/Message.jsx"),y=n("./MapStore2/web/client/plugins/import/index.js"),b=y.StylePolygon,h=y.StylePolyline,g=y.StylePoint,S=n("./MapStore2/web/client/components/import/style/StylePanel.jsx"),j=n("./MapStore2/web/client/components/misc/StandardDialog.jsx"),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(p,e);var t,n,r,c=l(p);function p(){return a(this,p),c.apply(this,arguments)}return t=p,(n=[{key:"render",value:function(){var e={Polygon:m.createElement(b,null),MultiPolygon:m.createElement(b,null),GeometryCollection:m.createElement(b,null),LineString:m.createElement(h,null),MultiLineString:m.createElement(h,null),MultiPoint:m.createElement(g,null),Point:m.createElement(g,null)},t=m.createElement(S,o({},this.props,{setLayers:this.props.setLayers,stylers:e,uploadMessage:m.createElement(d,{msgId:this.props.uploadMessage}),cancelMessage:m.createElement(d,{msgId:"shapefile.cancel"}),nextMessage:m.createElement(d,{msgId:"shapefile.next"}),finishMessage:m.createElement(d,{msgId:"shapefile.finish"}),skipMessage:m.createElement(d,{msgId:"shapefile.skip"})}));return this.props.layers?m.createElement(j,{id:"import-style-dialog",onClose:this.props.onClose,modal:this.props.modal,show:!0,header:m.createElement(d,{msgId:"shapefile.title"})},t):t}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(m.Component);u(v,"propTypes",{id:f.string,layers:f.array,selected:f.object,style:f.object,shapeStyle:f.object,onError:f.func,setLayers:f.func,addShapeLayer:f.func,onSelectLayer:f.func,onLayerAdded:f.func,error:f.string,mapType:f.string,wrap:f.bool,wrapWithPanel:f.bool,panelStyle:f.object,panelClassName:f.string,visible:f.bool,modal:f.bool,onClose:f.func,closeGlyph:f.string,uploadMessage:f.string,buttonSize:f.string}),u(v,"defaultProps",{id:"mapstore-shapefile-upload",uploadMessage:"shapefile.placeholder",wrap:!0,modal:!0,wrapWithPanel:!1,panelStyle:{minWidth:"360px",zIndex:1995,position:"absolute",overflow:"visible",top:"30px",left:"calc(50% - 150px)"},panelClassName:"toolbar-panel",visible:!1,onClose:function(){},closeGlyph:"1-close",buttonSize:"small"}),e.exports=v},"./MapStore2/web/client/plugins/import/index.js":function(e,t,n){var r=n("./node_modules/react-redux/es/index.js").connect,o=n("./MapStore2/web/client/actions/mapimport.js").onShapeError,a=n("./MapStore2/web/client/actions/style.js").setStyleParameter,s=r((function(e){return{uploadOptions:{error:e.mapimport&&e.mapimport.error||null,loading:e.mapimport&&e.mapimport.loading||!1}}}),{onShapeError:o})(n("./MapStore2/web/client/components/import/ShapefileUploadAndStyle.jsx")),i=r((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:a})(n("./MapStore2/web/client/components/style/StylePolygon.jsx")),l=r((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:a})(n("./MapStore2/web/client/components/style/StylePoint.jsx")),c=r((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:a})(n("./MapStore2/web/client/components/style/StylePolyline.jsx"));e.exports={ShapeFileUploadAndStyle:s,StylePolygon:i,StylePolyline:c,StylePoint:l}},"./MapStore2/web/client/utils/StyleUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"toVectorStyle",(function(){return i}));var r=n("./node_modules/object-assign/index.js"),o=n.n(r),a=function(e){return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")},s={r:255,g:0,b:0,a:1},i=function(e,t){var n=o()({},e),r=function(e){return e.features&&e.features[0]?e.features[0].geometry&&e.features[0].geometry.type:void 0}(e);!t.marker||"Point"!==r&&"MultiPoint"!==r||(n.styleName="marker",n.handleClickOnLayer=!0);var i=t||{},l=i.color,c=void 0===l?s:l,p=i.fill,u=void 0===p?s:p;return n.style={weight:t.width,radius:t.radius,opacity:c.a,fillOpacity:u.a,color:a(c),fillColor:a(u)},n}}}]);